"use strict";var p=Math.pow;(self.webpackChunkcvs=self.webpackChunkcvs||[]).push([[86],{3086:(Qt,F,u)=>{u.r(F),u.d(F,{CameraModule:()=>Nt});var f=u(9808),E=u(9516),t=u(5e3),S=u(7423);let W=(()=>{class n{ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-camera"]],decls:17,vars:0,consts:[[1,"page-container"],[1,"button-box"],[1,"camera-background"],["mat-raised-button","","routerLink","video-tag",1,"w-60"],["mat-raised-button","","routerLink","ngx-webcam"],[1,"insurance-card-background"],["mat-raised-button","","routerLink","add-insurance"],["mat-raised-button","","routerLink","show-insurance"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"button",3),t._uU(4,"VIDEO TAG"),t.qZA(),t.qZA(),t.TgZ(5,"div",1),t._UZ(6,"div",2),t.TgZ(7,"button",4),t._uU(8,"NGX-WEBCAM"),t.qZA(),t.qZA(),t.TgZ(9,"div",1),t._UZ(10,"div",5),t.TgZ(11,"button",6),t._uU(12,"ADD INSURANCE"),t.qZA(),t.qZA(),t.TgZ(13,"div",1),t._UZ(14,"div",5),t.TgZ(15,"button",7),t._uU(16,"SHOW INSURANCE"),t.qZA(),t.qZA(),t.qZA())},directives:[S.lW,E.rH],styles:[".page-container[_ngcontent-%COMP%]{width:100%}@media (min-width: 640px){.page-container[_ngcontent-%COMP%]{max-width:640px}}@media (min-width: 768px){.page-container[_ngcontent-%COMP%]{max-width:768px}}@media (min-width: 1024px){.page-container[_ngcontent-%COMP%]{max-width:1024px}}@media (min-width: 1280px){.page-container[_ngcontent-%COMP%]{max-width:1280px}}@media (min-width: 1536px){.page-container[_ngcontent-%COMP%]{max-width:1536px}}.page-container[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-top:1rem;display:flex;flex-direction:column;flex-wrap:wrap;--tw-border-opacity: 1;border-color:rgb(107 114 128 / var(--tw-border-opacity))}@media (min-width: 640px){.page-container[_ngcontent-%COMP%]{flex-direction:row}}.button-box[_ngcontent-%COMP%]{margin:.5rem;display:flex;height:15rem;width:24rem;flex:1 1 auto;flex-direction:column;align-items:center;justify-content:center;--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}@media (min-width: 640px){.button-box[_ngcontent-%COMP%]{height:24rem}}.camera-background[_ngcontent-%COMP%]{background-image:url(camera.38e574ff37284911.jpg);background-repeat:no-repeat;background-size:auto;width:100%;height:7rem;flex-grow:1;background-size:cover;background-position:center;padding:1rem}@media (min-width: 640px){.camera-background[_ngcontent-%COMP%]{height:20rem}.camera-background[_ngcontent-%COMP%]{background-size:auto}}.insurance-card-background[_ngcontent-%COMP%]{background-image:url(insurance-card.88c25a9ca6bdefab.jpg);background-repeat:no-repeat;width:100%;height:7rem;flex-grow:1;background-size:contain;background-position:center;padding:1rem}@media (min-width: 640px){.insurance-card-background[_ngcontent-%COMP%]{height:20rem}}button[_ngcontent-%COMP%]{margin-top:2.5rem;margin-bottom:1rem}"]}),n})();var j=u(4466),b=u(655),M=u(2368);const B=["video"],X=["canvas"];function K(n,a){if(1&n&&(t.TgZ(0,"div",9),t._UZ(1,"video",10,11),t._UZ(3,"canvas",12,13),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.ekj("show",!e.isCaptured)("hide",e.isCaptured),t.Q6J("width",e.WIDTH)("height",e.HEIGHT),t.xp6(2),t.ekj("show",e.isCaptured)("hide",!e.isCaptured),t.Q6J("width",e.WIDTH)("height",e.HEIGHT)}}function $(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().capture()}),t._uU(1,"Snap Photo"),t.qZA()}}function tt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw().removeCurrent()}),t._uU(1,"Take Another"),t.qZA()}}function et(n,a){if(1&n&&(t.TgZ(0,"div",16),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.error,". Please click refresh on stackblitz ")}}function nt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li",17),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw().setPhoto(s)}),t._UZ(1,"img",18),t.qZA()}if(2&n){const e=a.$implicit;t.xp6(1),t.Q6J("src",e,t.LSH)}}let it=(()=>{class n{constructor(){this.WIDTH=640,this.HEIGHT=480,this.captures=[],this.showCamera=!0}ngOnInit(){}ngAfterViewInit(){return(0,b.mG)(this,void 0,void 0,function*(){yield this.setupDevices()})}setupDevices(){return(0,b.mG)(this,void 0,void 0,function*(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)try{const e=yield navigator.mediaDevices.getUserMedia({video:!0});e?(this.video.nativeElement.srcObject=e,this.video.nativeElement.play(),this.error=null):this.error="You have no output video device"}catch(e){this.error=e}})}capture(){this.drawImageToCanvas(this.video.nativeElement),this.captures.push(this.canvas.nativeElement.toDataURL("image/png")),this.isCaptured=!0}removeCurrent(){this.isCaptured=!1}setPhoto(e){this.isCaptured=!0;var i=new Image;i.src=this.captures[e],this.drawImageToCanvas(i)}drawImageToCanvas(e){this.canvas.nativeElement.getContext("2d").drawImage(e,0,0,this.WIDTH,this.HEIGHT)}showHideCamera(e){return(0,b.mG)(this,void 0,void 0,function*(){e.checked||this.video.nativeElement.pause(),console.log(e),this.showCamera=e.checked,this.showCamera||setTimeout(()=>(0,b.mG)(this,void 0,void 0,function*(){yield this.setupDevices()}),500)})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-video-tag"]],viewQuery:function(e,i){if(1&e&&(t.Gf(B,5),t.Gf(X,5)),2&e){let r;t.iGM(r=t.CRH())&&(i.video=r.first),t.iGM(r=t.CRH())&&(i.canvas=r.first)}},decls:10,vars:6,consts:[[1,"container","shadow-lg","mx-auto","mt-6"],[3,"checked","change"],["class","video-container",4,"ngIf"],[1,"snap-container"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-danger",3,"click",4,"ngIf"],["class","text-danger mt-4",4,"ngIf"],[1,"list-unstyled"],[3,"click",4,"ngFor","ngForOf"],[1,"video-container"],["id","video",3,"width","height"],["video",""],["id","canvas",3,"width","height"],["canvas",""],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"text-danger","mt-4"],[3,"click"],["height","50",3,"src"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-slide-toggle",1),t.NdJ("change",function(s){return i.showHideCamera(s)}),t._uU(2,"Camera"),t.qZA(),t.YNc(3,K,5,12,"div",2),t.TgZ(4,"div",3),t.YNc(5,$,2,0,"button",4),t.YNc(6,tt,2,0,"button",5),t.YNc(7,et,2,1,"div",6),t.qZA(),t.TgZ(8,"ul",7),t.YNc(9,nt,2,1,"li",8),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("checked",i.showCamera),t.xp6(2),t.Q6J("ngIf",!i.error&&i.showCamera),t.xp6(2),t.Q6J("ngIf",!i.isCaptured),t.xp6(1),t.Q6J("ngIf",i.isCaptured),t.xp6(1),t.Q6J("ngIf",i.error),t.xp6(2),t.Q6J("ngForOf",i.captures))},directives:[M.Rr,f.O5,f.sg],styles:[".snap-container[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px;text-align:center}.list-unstyled[_ngcontent-%COMP%]{list-style:none}.list-unstyled[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;padding:5px 10px;cursor:pointer}.show[_ngcontent-%COMP%]{display:block}.hide[_ngcontent-%COMP%]{display:none}"]}),n})();var P=u(8929);const R=Symbol("__sensor__"),h=R;function O(n,a){for(const e in a)Object.defineProperty(n,e,{configurable:!0,value:a[e]})}const at=(n,...a)=>class extends n{constructor(...e){super(e);const i=document.createDocumentFragment();this.addEventListener=(r,...s)=>i.addEventListener(r,...s),this.removeEventListener=(...r)=>i.removeEventListener(...r),this.dispatchEvent=r=>{O(r,{currentTarget:this}),r.target||O(r,{target:this});const s=`on${r.type}`;"function"==typeof this[s]&&this[s](r);const l=i.dispatchEvent(r);return l&&this.parentNode&&this.parentNode.dispatchEvent(r),O(r,{currentTarget:null,target:null}),l}}};class rt extends(at(Object)){}class ot extends Event{constructor(a,e){if(super(a,e),!(e&&e.error instanceof DOMException))throw TypeError("Failed to construct 'SensorErrorEvent':2nd argument much contain 'error' property");Object.defineProperty(this,"error",{configurable:!1,writable:!1,value:e.error})}}function k(n,a){Object.defineProperty(n,`on${a}`,{enumerable:!0,configurable:!1,writable:!0,value:null})}class C extends rt{constructor(a){if(super(),this[h]=new WeakMap,k(this,"reading"),k(this,"activate"),k(this,"error"),function T(n,a,e){const i=n[a];for(const r in e)i[r]=e[r],Object.defineProperty(n,r,{get:()=>i[r]})}(this,h,{activated:!1,hasReading:!1,timestamp:null}),this[h].state=1,this[h].notifyError=(e,i)=>{let r=new ot("error",{error:new DOMException(e,i)});this.dispatchEvent(r),this.stop()},this[h].notifyActivatedState=()=>{let e=new Event("activate");this[h].activated=!0,this.dispatchEvent(e),this[h].state=3},this[h].activateCallback=()=>{},this[h].deactivateCallback=()=>{},this[h].frequency=null,window&&window.parent!=window.top)throw new DOMException("Only instantiable in a top-level browsing context","SecurityError");a&&"number"==typeof a.frequency&&a.frequency>60&&(this.frequency=a.frequency)}start(){2===this[h].state||3===this[h].state||(this[h].state=2,this[h].activateCallback())}stop(){1!==this[h].state&&(this[h].activated=!1,this[h].hasReading=!1,this[h].timestamp=null,this[h].deactivateCallback(),this[h].state=1)}}const o=R;let y;screen.orientation?y=screen.orientation:screen.msOrientation?y=screen.msOrientation:(y={},Object.defineProperty(y,"angle",{get:()=>window.orientation||0}));const x=(n,...a)=>class extends n{constructor(...e){super(e);for(const i of a)if(`on${i}`in window){this[o].eventName=i;break}this[o].activateCallback=()=>{window.addEventListener(this[o].eventName,this[o].handleEvent,{capture:!0})},this[o].deactivateCallback=()=>{window.removeEventListener(this[o].eventName,this[o].handleEvent,{capture:!0})}}};const ct=window.RelativeOrientationSensor||class extends(x(C,"deviceorientation")){constructor(a={}){super(a),Object.defineProperty(this,"quaternion","screen"===(a.coordinateSystem||"world")?{get:()=>function H(n){return n?function st(n,a,e){const i=Math.sin(e/2),r=Math.cos(e/2);return function m(c){const d=Math.sqrt(p(c[0],2)+p(c[1],2)+p(c[2],2)+p(c[3],2));return 0===d?[0,0,0,1]:c.map(w=>w/d)}(function l(c,d){return[c[0]*d[3]+c[3]*d[0]+c[1]*d[2]-c[2]*d[1],c[1]*d[3]+c[3]*d[1]+c[2]*d[0]-c[0]*d[2],c[2]*d[3]+c[3]*d[2]+c[0]*d[1]-c[1]*d[0],c[3]*d[3]-c[0]*d[0]-c[1]*d[1]-c[2]*d[2]]}(n,[a[0]*i,a[1]*i,a[2]*i,r]))}(n,[0,0,1],-y.angle*Math.PI/180):null}(this[o].quaternion)}:{get:()=>this[o].quaternion}),this[o].handleEvent=e=>{e.absolute||null===e.alpha?this[o].notifyError("Could not connect to a sensor","NotReadableError"):(this[o].activated||this[o].notifyActivatedState(),this[o].timestamp=performance.now(),this[o].quaternion=function G(n,a,e){const i=Math.PI/180,r=(a||0)*i,s=(e||0)*i,l=(n||0)*i,m=Math.cos(.5*l),c=Math.sin(.5*l),d=Math.cos(.5*s),w=Math.sin(.5*s),I=Math.cos(.5*r),A=Math.sin(.5*r);return[A*d*m-I*w*c,I*w*m+A*d*c,I*d*c+A*w*m,I*d*m-A*w*c]}(e.alpha,e.beta,e.gamma),this[o].hasReading=!0,this.dispatchEvent(new Event("reading")))},this[o].deactivateCallback=()=>{this[o].quaternion=null}}populateMatrix(a){!function q(n,a){return(n instanceof Float32Array||n instanceof Float64Array)&&n.length>=16&&(n[0]=1-2*(p(a[1],2)+p(a[2],2)),n[1]=2*(a[0]*a[1]-a[2]*a[3]),n[2]=2*(a[0]*a[2]+a[1]*a[3]),n[3]=0,n[4]=2*(a[0]*a[1]+a[2]*a[3]),n[5]=1-2*(p(a[0],2)+p(a[2],2)),n[6]=2*(a[1]*a[2]-a[0]*a[3]),n[7]=0,n[8]=2*(a[0]*a[2]-a[1]*a[3]),n[9]=2*(a[1]*a[2]+a[0]*a[3]),n[10]=1-2*(p(a[0],2)+p(a[1],2)),n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1),n}(a,this.quaternion)}},dt=(window.AbsoluteOrientationSensor||x(C,"deviceorientationabsolute","deviceorientation"),window.Gyroscope||x(C,"devicemotion"),window.Accelerometer||x(C,"devicemotion"),window.LinearAccelerationSensor||x(C,"devicemotion"),window.GravitySensor||x(C,"devicemotion"),["video"]),lt=["canvas"];function ut(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().rotateVideoInput(!0)}),t.qZA()}}class N{constructor(a,e,i){this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._imageData=null,this._mimeType=e,this._imageAsDataUrl=a,this._imageData=i}static getDataFromDataUrl(a,e){return a.replace(`data:${e};base64,`,"")}get imageAsBase64(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=N.getDataFromDataUrl(this._imageAsDataUrl,this._mimeType)}get imageAsDataUrl(){return this._imageAsDataUrl}get imageData(){return this._imageData}}let D=(()=>{class n{constructor(){this.width=640,this.height=480,this.videoOptions=n.DEFAULT_VIDEO_OPTIONS,this.allowCameraSwitch=!0,this.captureImageData=!1,this.imageType=n.DEFAULT_IMAGE_TYPE,this.imageQuality=n.DEFAULT_IMAGE_QUALITY,this.imageCapture=new t.vpe,this.initError=new t.vpe,this.imageClick=new t.vpe,this.cameraSwitched=new t.vpe,this.availableVideoInputs=[],this.videoInitialized=!1,this.activeVideoInputIndex=-1,this.mediaStream=null,this.activeVideoSettings=null}set trigger(e){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.triggerSubscription=e.subscribe(()=>{this.takeSnapshot()})}set switchCamera(e){this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe(),this.switchCameraSubscription=e.subscribe(i=>{"string"==typeof i?this.switchToVideoInput(i):this.rotateVideoInput(!1!==i)})}static getMediaConstraintsForDevice(e,i){const r=i||this.DEFAULT_VIDEO_OPTIONS;return e&&(r.deviceId={exact:e}),r}static getDeviceIdFromMediaStreamTrack(e){if(e.getSettings&&e.getSettings()&&e.getSettings().deviceId)return e.getSettings().deviceId;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().deviceId){const i=e.getConstraints().deviceId;return n.getValueFromConstrainDOMString(i)}}static getFacingModeFromMediaStreamTrack(e){if(e){if(e.getSettings&&e.getSettings()&&e.getSettings().facingMode)return e.getSettings().facingMode;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().facingMode){const i=e.getConstraints().facingMode;return n.getValueFromConstrainDOMString(i)}}}static isUserFacing(e){const i=n.getFacingModeFromMediaStreamTrack(e);return!!i&&"user"===i.toLowerCase()}static getValueFromConstrainDOMString(e){if(e){if(e instanceof String)return String(e);if(Array.isArray(e)&&Array(e).length>0)return String(e[0]);if("object"==typeof e){if(e.exact)return String(e.exact);if(e.ideal)return String(e.ideal)}}return null}ngAfterViewInit(){this.detectAvailableDevices().then(()=>{this.switchToVideoInput(null)}).catch(e=>{this.initError.next({message:e}),this.switchToVideoInput(null)})}ngOnDestroy(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()}takeSnapshot(){const e=this.nativeVideoElement,i={width:this.width,height:this.height};e.videoWidth&&(i.width=e.videoWidth,i.height=e.videoHeight);const r=this.canvas.nativeElement;r.width=i.width,r.height=i.height;const s=r.getContext("2d");s.drawImage(e,0,0);const l=this.imageType?this.imageType:n.DEFAULT_IMAGE_TYPE,c=r.toDataURL(l,this.imageQuality?this.imageQuality:n.DEFAULT_IMAGE_QUALITY);let d=null;this.captureImageData&&(d=s.getImageData(0,0,r.width,r.height)),this.imageCapture.next(new N(c,l,d))}rotateVideoInput(e){this.availableVideoInputs&&this.availableVideoInputs.length>1&&this.switchToVideoInput(this.availableVideoInputs[(this.activeVideoInputIndex+(e?1:this.availableVideoInputs.length-1))%this.availableVideoInputs.length].deviceId)}switchToVideoInput(e){this.videoInitialized=!1,this.stopMediaTracks(),this.initWebcam(e,this.videoOptions)}videoResize(){}get videoWidth(){const e=this.getVideoAspectRatio();return Math.min(this.width,this.height*e)}get videoHeight(){const e=this.getVideoAspectRatio();return Math.min(this.height,this.width/e)}get videoStyleClasses(){let e="";return this.isMirrorImage()&&(e+="mirrored "),e.trim()}get nativeVideoElement(){return this.video.nativeElement}getVideoAspectRatio(){const e=this.nativeVideoElement;return e.videoWidth&&e.videoWidth>0&&e.videoHeight&&e.videoHeight>0?e.videoWidth/e.videoHeight:this.width/this.height}initWebcam(e,i){const r=this.nativeVideoElement;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const s=n.getMediaConstraintsForDevice(e,i);navigator.mediaDevices.getUserMedia({video:s}).then(l=>{this.mediaStream=l,r.srcObject=l,r.play(),this.activeVideoSettings=l.getVideoTracks()[0].getSettings();const m=n.getDeviceIdFromMediaStreamTrack(l.getVideoTracks()[0]);this.cameraSwitched.next(m),this.detectAvailableDevices().then(()=>{this.activeVideoInputIndex=m?this.availableVideoInputs.findIndex(c=>c.deviceId===m):-1,this.videoInitialized=!0}).catch(()=>{this.activeVideoInputIndex=-1,this.videoInitialized=!0})}).catch(l=>{this.initError.next({message:l.message,mediaStreamError:l})})}else this.initError.next({message:"Cannot read UserMedia from MediaDevices."})}getActiveVideoTrack(){return this.mediaStream?this.mediaStream.getVideoTracks()[0]:null}isMirrorImage(){if(!this.getActiveVideoTrack())return!1;{let e="auto";switch(this.mirrorImage&&("string"==typeof this.mirrorImage?e=String(this.mirrorImage).toLowerCase():this.mirrorImage.x&&(e=this.mirrorImage.x.toLowerCase())),e){case"always":return!0;case"never":return!1}}return n.isUserFacing(this.getActiveVideoTrack())}stopMediaTracks(){this.mediaStream&&this.mediaStream.getTracks&&(this.nativeVideoElement.pause(),this.mediaStream.getTracks().forEach(e=>e.stop()))}unsubscribeFromSubscriptions(){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe()}detectAvailableDevices(){return new Promise((e,i)=>{(class ht{static getAvailableVideoInputs(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?new Promise((a,e)=>{navigator.mediaDevices.enumerateDevices().then(i=>{a(i.filter(r=>"videoinput"===r.kind))}).catch(i=>{e(i.message||i)})}):Promise.reject("enumerateDevices() not supported.")}}).getAvailableVideoInputs().then(r=>{this.availableVideoInputs=r,e(r)}).catch(r=>{this.availableVideoInputs=[],i(r)})})}}return n.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"},n.DEFAULT_IMAGE_TYPE="image/jpeg",n.DEFAULT_IMAGE_QUALITY=.92,n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["webcam"]],viewQuery:function(e,i){if(1&e&&(t.Gf(dt,7),t.Gf(lt,7)),2&e){let r;t.iGM(r=t.CRH())&&(i.video=r.first),t.iGM(r=t.CRH())&&(i.canvas=r.first)}},inputs:{width:"width",height:"height",videoOptions:"videoOptions",allowCameraSwitch:"allowCameraSwitch",mirrorImage:"mirrorImage",captureImageData:"captureImageData",imageType:"imageType",imageQuality:"imageQuality",trigger:"trigger",switchCamera:"switchCamera"},outputs:{imageCapture:"imageCapture",initError:"initError",imageClick:"imageClick",cameraSwitched:"cameraSwitched"},decls:6,vars:7,consts:[[1,"webcam-wrapper",3,"click"],["autoplay","","muted","","playsinline","",3,"width","height","resize"],["video",""],["class","camera-switch",3,"click",4,"ngIf"],[3,"width","height"],["canvas",""],[1,"camera-switch",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return i.imageClick.next()}),t.TgZ(1,"video",1,2),t.NdJ("resize",function(){return i.videoResize()}),t.qZA(),t.YNc(3,ut,1,0,"div",3),t._UZ(4,"canvas",4,5),t.qZA()),2&e&&(t.xp6(1),t.Tol(i.videoStyleClasses),t.Q6J("width",i.videoWidth)("height",i.videoHeight),t.xp6(2),t.Q6J("ngIf",i.allowCameraSwitch&&i.availableVideoInputs.length>1&&i.videoInitialized),t.xp6(1),t.Q6J("width",i.width)("height",i.height))},directives:[f.O5],styles:[".webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;position:relative;line-height:0}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scaleX(-1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:#0000001a;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC);background-repeat:no-repeat;border-radius:5px;position:absolute;right:13px;top:10px;height:48px;width:48px;background-size:80%;cursor:pointer;background-position:center;transition:background-color .2s ease}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:#0000002e}"]}),n})(),mt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[f.ez]]}),n})();const gt=["secondImage"];function pt(n,a){if(1&n&&t._UZ(0,"img",5,6),2&n){const e=t.oxw();t.Q6J("src",null==e.webcamImage?null:e.webcamImage.imageAsDataUrl,t.LSH)}}function ft(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"webcam",7),t.NdJ("imageCapture",function(r){return t.CHM(e),t.oxw().handleImage(r)})("initError",function(r){return t.CHM(e),t.oxw().handleInitError(r)}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("trigger",e.triggerObservable)}}function vt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().triggerSnapshot()}),t._uU(1,"Take A Snapshot"),t.qZA()}}let wt=(()=>{class n{constructor(){this.showCamera=!0,this.quaternion=[0,0,0,0],this.webcamImage=null,this.errors=[],this.rotate=0,this.trigger=new P.xQ}ngOnInit(){window.addEventListener("deviceorientation",i=>this.handleOrientation(i));const e=new ct;e.addEventListener("reading",()=>{this.quaternion=e.quaternion}),e.start()}get triggerObservable(){return this.trigger.asObservable()}handleImage(e){this.webcamImage=e}triggerSnapshot(){this.trigger.next()}handleOrientation(e){var i;const r=Math.trunc(e.alpha||0),l=(Math.trunc(e.beta||0),Math.trunc(e.gamma||0));this.rotate=l;let m=null===(i=this.secondImage)||void 0===i?void 0:i.nativeElement;m&&(m.style.transform=`rotate(${r}deg)`)}imageRotation(){return`rotate(${100*this.quaternion[1]}deg)`}showHideCamera(e){return(0,b.mG)(this,void 0,void 0,function*(){this.showCamera=e.checked})}handleInitError(e){e.mediaStreamError&&"NotAllowedError"===e.mediaStreamError.name&&(console.warn("Camera access was not allowed by user!"),alert("Camera access was not allowed by user!"))}get first(){return Math.trunc(100*this.quaternion[0])}get second(){return Math.trunc(100*this.quaternion[1])}get third(){return Math.trunc(100*this.quaternion[2])}get fourth(){return Math.trunc(100*this.quaternion[3])}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ngx-webcam"]],viewQuery:function(e,i){if(1&e&&t.Gf(gt,5),2&e){let r;t.iGM(r=t.CRH())&&(i.secondImage=r.first)}},decls:7,vars:4,consts:[[1,"page-container"],[3,"checked","change"],[3,"src",4,"ngIf"],[3,"trigger","imageCapture","initError",4,"ngIf"],["mat-raised-button","",3,"click",4,"ngIf"],[3,"src"],["secondImage",""],[3,"trigger","imageCapture","initError"],["mat-raised-button","",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-slide-toggle",1),t.NdJ("change",function(s){return i.showHideCamera(s)}),t._uU(2,"Camera"),t.qZA(),t.YNc(3,pt,2,1,"img",2),t.YNc(4,ft,1,1,"webcam",3),t.TgZ(5,"div"),t.YNc(6,vt,2,0,"button",4),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("checked",i.showCamera),t.xp6(2),t.Q6J("ngIf",i.webcamImage),t.xp6(1),t.Q6J("ngIf",i.showCamera),t.xp6(2),t.Q6J("ngIf",i.showCamera))},directives:[M.Rr,f.O5,D,S.lW],styles:[".page-container[_ngcontent-%COMP%]{width:100%}@media (min-width: 640px){.page-container[_ngcontent-%COMP%]{max-width:640px}}@media (min-width: 768px){.page-container[_ngcontent-%COMP%]{max-width:768px}}@media (min-width: 1024px){.page-container[_ngcontent-%COMP%]{max-width:1024px}}@media (min-width: 1280px){.page-container[_ngcontent-%COMP%]{max-width:1280px}}@media (min-width: 1536px){.page-container[_ngcontent-%COMP%]{max-width:1536px}}.page-container[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:flex;flex-direction:column;align-items:center;padding:2rem;--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}img[_ngcontent-%COMP%]{height:20rem;width:20rem;border-radius:9999px}webcam[_ngcontent-%COMP%]{margin-top:1rem}button[_ngcontent-%COMP%]{margin-top:1.5rem}"]}),n})();var g=u(3075),U=u(1086),z=u(1737),J=u(2340),Q=u(7221),_t=u(8117),bt=u(520);let L=(()=>{class n{constructor(e){this.http=e}updateCard(e){return this.http.put(J.N.INSURANCE_DOMAIN+"/insurance-card",e).pipe((0,Q.K)(this.handleError))}getCard(){return this.http.get(J.N.INSURANCE_DOMAIN+"/insurance-card").pipe((0,_t.B)(),(0,Q.K)((e,i)=>404===e.status?(0,U.of)(void 0):(console.error("ERROR",e.error),(0,z._)("Something bad happened; please try again later."))))}deleteCard(){return this.http.delete(J.N.INSURANCE_DOMAIN+"/insurance-card").pipe((0,Q.K)(this.handleError))}handleError(e){return 0===e.status?console.error("An error occurred:",e.error):console.error(`Backend returned code ${e.status}, body was: `,e.error),(0,z._)("Something bad happened; please try again later.")}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(bt.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var v=u(9224),Z=u(7322),Y=u(8833);function Ct(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Required"),t.qZA())}function xt(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Required"),t.qZA())}function It(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Required"),t.qZA())}function At(n,a){if(1&n&&t._UZ(0,"img",12),2&n){const e=t.oxw(2);t.Q6J("src",e.webcamImage.imageAsDataUrl,t.LSH)}}function Tt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"webcam",13),t.NdJ("imageCapture",function(r){return t.CHM(e),t.oxw(2).handleImage(r)})("initError",function(r){return t.CHM(e),t.oxw(2).handleInitError(r)}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("trigger",e.triggerObservable)}}function yt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).triggerSnapshot()}),t._uU(1,"Take A Snapshot"),t.qZA()}}function Et(n,a){if(1&n&&(t.TgZ(0,"button",15),t._uU(1,"Submit"),t.qZA()),2&n){const e=t.oxw(2);t.Q6J("disabled",!e.insuranceForm.valid)}}function St(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"form",2),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().submitForm()}),t.TgZ(1,"mat-card-content"),t.TgZ(2,"mat-form-field"),t._UZ(3,"input",3),t.YNc(4,Ct,2,0,"mat-error",4),t.qZA(),t.TgZ(5,"mat-form-field"),t._UZ(6,"input",5),t.YNc(7,xt,2,0,"mat-error",4),t.qZA(),t.TgZ(8,"mat-form-field"),t._UZ(9,"input",6),t.YNc(10,It,2,0,"mat-error",4),t.qZA(),t.TgZ(11,"mat-slide-toggle",7),t.NdJ("change",function(r){return t.CHM(e),t.oxw().showHideCamera(r)}),t._uU(12,"Scan Insurance Card"),t.qZA(),t.YNc(13,At,1,1,"img",8),t.YNc(14,Tt,1,1,"webcam",9),t.YNc(15,yt,2,0,"button",10),t.qZA(),t.TgZ(16,"mat-card-actions"),t.YNc(17,Et,2,1,"button",11),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();let i,r,s;t.Q6J("formGroup",e.insuranceForm),t.xp6(4),t.Q6J("ngIf",null==(i=e.insuranceForm.get("name"))?null:i.hasError("required")),t.xp6(3),t.Q6J("ngIf",null==(r=e.insuranceForm.get("id"))?null:r.hasError("required")),t.xp6(3),t.Q6J("ngIf",null==(s=e.insuranceForm.get("group"))?null:s.hasError("required")),t.xp6(1),t.Q6J("checked",e.showCamera),t.xp6(2),t.Q6J("ngIf",e.webcamImage&&!e.showCamera),t.xp6(1),t.Q6J("ngIf",e.showCamera),t.xp6(1),t.Q6J("ngIf",e.showCamera),t.xp6(2),t.Q6J("ngIf",!e.showCamera)}}function Mt(n,a){if(1&n&&t._UZ(0,"img",5),2&n){const e=t.oxw().ngIf;t.Q6J("src",e.cardImage,t.LSH)}}function Ot(n,a){if(1&n&&(t.TgZ(0,"mat-card-content"),t.TgZ(1,"mat-form-field"),t.TgZ(2,"mat-label"),t._uU(3,"Name"),t.qZA(),t._UZ(4,"input",3),t.qZA(),t.TgZ(5,"mat-form-field"),t.TgZ(6,"mat-label"),t._uU(7,"Id"),t.qZA(),t._UZ(8,"input",3),t.qZA(),t.TgZ(9,"mat-form-field"),t.TgZ(10,"mat-label"),t._uU(11,"Group"),t.qZA(),t._UZ(12,"input",3),t.qZA(),t.YNc(13,Mt,1,1,"img",4),t.qZA()),2&n){const e=a.ngIf;t.xp6(4),t.Q6J("value",e.name),t.xp6(4),t.Q6J("value",e.id),t.xp6(4),t.Q6J("value",e.group),t.xp6(1),t.Q6J("ngIf",e.cardImage)}}const kt=[{path:"",component:W},{path:"video-tag",component:it},{path:"ngx-webcam",component:wt},{path:"add-insurance",component:(()=>{class n{constructor(e,i,r){this.fb=e,this.insuranceService=i,this.router=r,this.insuranceForm=this.makeForm(),this.showCamera=!1,this.trigger=new P.xQ}ngOnInit(){}submitForm(){this.insuranceService.updateCard(this.insuranceForm.value).subscribe(()=>this.router.navigate(["camera"]))}showHideCamera(e){return(0,b.mG)(this,void 0,void 0,function*(){this.showCamera=e.checked})}get triggerObservable(){return this.trigger.asObservable()}handleImage(e){var i;this.webcamImage=e,null===(i=this.insuranceForm.get("cardImage"))||void 0===i||i.setValue(e.imageAsDataUrl),this.showCamera=!1}triggerSnapshot(){this.trigger.next()}handleInitError(e){e.mediaStreamError&&"NotAllowedError"===e.mediaStreamError.name&&(console.warn("Camera access was not allowed by user!"),alert("Camera access was not allowed by user!"))}makeForm(){return this.fb.group({name:["John Doe",[g.kI.required,g.kI.minLength(5)]],id:["123456",g.kI.required],group:["XYX-123",g.kI.required],cardImage:[null]})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.qu),t.Y36(L),t.Y36(E.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-insurance"]],decls:6,vars:1,consts:[[1,"container","mx-auto","mt-8"],["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],["matInput","","placeholder","Nane","formControlName","name"],[4,"ngIf"],["matInput","","placeholder","Insurance Id","formControlName","id"],["matInput","","placeholder","Insurance Group","formControlName","group"],[3,"checked","change"],[3,"src",4,"ngIf"],[3,"trigger","imageCapture","initError",4,"ngIf"],["mat-raised-button","",3,"click",4,"ngIf"],["type","submit","mat-raised-button","","color","primary",3,"disabled",4,"ngIf"],[3,"src"],[3,"trigger","imageCapture","initError"],["mat-raised-button","",3,"click"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-card"),t.TgZ(2,"mat-card-title"),t.TgZ(3,"h3"),t._uU(4,"Add Insurance Information"),t.qZA(),t.qZA(),t.YNc(5,St,18,9,"form",1),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Q6J("ngIf",i.insuranceForm))},directives:[v.a8,v.n5,f.O5,g._Y,g.JL,g.sg,v.dn,Z.KE,Y.Nt,g.Fj,g.JJ,g.u,Z.TO,M.Rr,D,S.lW,v.hq],styles:["mat-card[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:24rem}mat-card-content[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;flex-direction:column}"]}),n})()},{path:"show-insurance",component:(()=>{class n{constructor(e,i){this.insuranceService=e,this.router=i,this.card$=(0,U.of)()}ngOnInit(){this.card$=this.insuranceService.getCard()}deleteCard(){this.insuranceService.deleteCard().subscribe(),this.card$=(0,U.of)(),this.router.navigate(["camera"])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(L),t.Y36(E.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-show-insurance"]],decls:11,vars:6,consts:[[1,"container","mx-auto","mt-8"],[4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click"],["matInput","","readonly","",3,"value"],["alt","",3,"src",4,"ngIf"],["alt","",3,"src"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-card"),t.TgZ(2,"mat-card-title"),t.TgZ(3,"h3"),t._uU(4,"Insurance Information"),t.qZA(),t.qZA(),t.YNc(5,Ot,14,4,"mat-card-content",1),t.ALo(6,"async"),t.TgZ(7,"mat-card-actions"),t.TgZ(8,"button",2),t.NdJ("click",function(){return i.deleteCard()}),t.ALo(9,"async"),t._uU(10,"DELETE"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Q6J("ngIf",t.lcZ(6,2,i.card$)),t.xp6(3),t.Q6J("disabled",void 0===t.lcZ(9,4,i.card$)))},directives:[v.a8,v.n5,f.O5,v.dn,Z.KE,Z.hX,Y.Nt,v.hq,S.lW],pipes:[f.Ov],styles:["mat-card-content[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;flex-direction:column}img[_ngcontent-%COMP%]{height:16rem;width:16rem;border-radius:.375rem}"]}),n})()}];let Nt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[f.ez,j.m,mt,E.Bz.forChild(kt)]]}),n})()}}]);