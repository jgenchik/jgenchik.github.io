"use strict";(self.webpackChunkcvs=self.webpackChunkcvs||[]).push([[747],{8747:(mt,T,a)=>{a.r(T),a.d(T,{TableModule:()=>ct});var g=a(9808),Z=a(9516),m=a(2994),v=a(1059),x=a(7168),M=a(7224),D=a(9563),u=a(2473),b=a(6087),s=a(2075),h=a(4847),r=a(1777),c=a(5113),t=a(5e3),O=a(6727),f=a(9224),w=a(4623),y=a(7322),A=a(8833),C=a(3075),B=a(7423);const W=["colorsList"];function N(e,o){if(1&e&&(t.TgZ(0,"mat-list-option",19),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",n," ")}}function P(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"mat-form-field",20),t.TgZ(1,"mat-label"),t._uU(2,"Filter results"),t.qZA(),t.TgZ(3,"input",21),t.NdJ("ngModelChange",function(l){return t.CHM(n),t.oxw().filter=l})("keyup",function(l){return t.CHM(n),t.oxw().onFilter(l)}),t.qZA(),t.qZA()}if(2&e){const n=t.oxw();t.xp6(3),t.Q6J("ngModel",n.filter)}}function S(e,o){1&e&&(t.TgZ(0,"th",29),t.NdJ("click",function(i){return i.stopPropagation()}),t._uU(1," Name "),t.qZA())}function U(e,o){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.Q6J("@myInsertRemoveTrigger",void 0),t.xp6(1),t.hij(" ",n.name," ")}}function Q(e,o){1&e&&(t.TgZ(0,"th",31),t._uU(1," Price "),t.qZA())}function Y(e,o){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=o.$implicit;t.Q6J("@myInsertRemoveTrigger",void 0),t.xp6(1),t.hij(" ",t.lcZ(2,2,n.price)," ")}}function R(e,o){1&e&&(t.TgZ(0,"th",32),t._uU(1," Color "),t.qZA())}function J(e,o){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.Q6J("@myInsertRemoveTrigger",void 0),t.xp6(1),t.hij(" ",n.color," ")}}function E(e,o){1&e&&(t.TgZ(0,"th",32),t._uU(1," Description "),t.qZA())}function k(e,o){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.description," ")}}function $(e,o){if(1&e&&(t.TgZ(0,"td",30),t.TgZ(1,"div",33),t.TgZ(2,"div"),t._uU(3),t.qZA(),t.qZA(),t.qZA()),2&e){const n=o.$implicit,i=t.oxw(2);t.uIk("colspan",i.displayedColumns.length),t.xp6(1),t.Q6J("@detailExpand",n==i.expandedWidget?"expanded":"collapsed"),t.xp6(2),t.Oqu(n.description)}}function F(e,o){1&e&&t._UZ(0,"tr",34)}function H(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"tr",35),t.NdJ("click",function(){const d=t.CHM(n).$implicit;return t.oxw(2).toggleEtpandedWidget(d)}),t.qZA()}}function j(e,o){if(1&e&&t._UZ(0,"tr",36),2&e){const n=o.$implicit,i=t.oxw(2);t.ekj("collapsed-detail",n!=i.expandedWidget)}}const I=function(){return["expandedDetail"]};function q(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"table",22),t.NdJ("matSortChange",function(l){return t.CHM(n),t.oxw().onMatSortChange(l)}),t.ynx(1,23),t.ynx(2,8),t.YNc(3,S,2,0,"th",24),t.YNc(4,U,2,2,"td",10),t.BQk(),t.ynx(5,11),t.YNc(6,Q,2,0,"th",25),t.YNc(7,Y,3,4,"td",10),t.BQk(),t.ynx(8,12),t.YNc(9,R,2,0,"th",9),t.YNc(10,J,2,2,"td",10),t.BQk(),t.ynx(11,13),t.YNc(12,E,2,0,"th",9),t.YNc(13,k,2,1,"td",10),t.BQk(),t.BQk(),t.ynx(14,26),t.YNc(15,$,4,3,"td",10),t.BQk(),t.YNc(16,F,1,0,"tr",14),t.YNc(17,H,1,0,"tr",27),t.YNc(18,j,1,2,"tr",28),t.qZA()}if(2&e){const n=t.oxw();t.Q6J("dataSource",n.widgetsByColorDs)("@myInsertRemoveTrigger",void 0),t.xp6(16),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(5,I))}}function z(e,o){1&e&&(t.TgZ(0,"th",32),t._uU(1," Name "),t.qZA())}function L(e,o){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.name," ")}}function G(e,o){1&e&&(t.TgZ(0,"th",32),t._uU(1," Price "),t.qZA())}function X(e,o){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,n.price)," ")}}function K(e,o){1&e&&(t.TgZ(0,"th",32),t._uU(1," Color "),t.qZA())}function V(e,o){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.color," ")}}function tt(e,o){1&e&&(t.TgZ(0,"th",32),t._uU(1," Description "),t.qZA())}function et(e,o){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.description," ")}}function nt(e,o){1&e&&t._UZ(0,"tr",34)}function ot(e,o){1&e&&t._UZ(0,"tr",37)}const it=function(){return[5,10,20]};let at=(()=>{class e{constructor(n,i){this.store=n,this.breakpointObserver=i,this.displayedColumns=["name","price","color"],this.allWidgetsDisplayedColumns=["name","price","color","description"],this.filter="",this.allColors=["BLUE","RED","GREEN"],this.widgetsByColor=[],this.widgetsByColorDs=new s.by(this.widgetsByColor),this.allWidgets$=this.store.select(D.Zx),this.dataSource=new s.by([]),this.expandedWidget=null}ngOnInit(){this.store.dispatch((0,u.rZ)()),this.allWidgets$.pipe((0,m.b)(n=>this.dataSource.data=n)).subscribe(),this.breakpointObserver.observe([c.u3.Handset,c.u3.Tablet,c.u3.Web]).pipe((0,m.b)(()=>{this.breakpointObserver.isMatched(c.u3.Handset)?this.allWidgetsDisplayedColumns=["name","price","color"]:(this.breakpointObserver.isMatched(c.u3.Tablet)||this.breakpointObserver.isMatched(c.u3.Web))&&(this.allWidgetsDisplayedColumns=["name","price","color","description"])})).subscribe()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.widgetsByColorDs.sort=this.sort,this.allWidgets$.pipe((0,v.O)([]),(0,x.M)(this.colorsSelector.selectedOptions.changed),(0,m.b)(([n,i])=>{this.widgetsByColorDs.data=this.makeArrayOfSelectedWidgets(n,i.source.selected)})).subscribe(),this.colorsSelector.selectedOptions.changed.pipe((0,x.M)(this.allWidgets$),(0,m.b)(([n,i])=>this.widgetsByColorDs.data=this.makeArrayOfSelectedWidgets(i,n.source.selected))).subscribe()}onFilter(n){this.widgetsByColorDs.filter=this.filter}onMatSortChange(n){this.widgetsByColorDs.sort=this.sort}addDummyWidget(){const n=100*Math.random();let i,l=Date.now().toString().slice(-2);const p=Math.floor(4*Math.random());i=n<33?"BLUE":n<66?"RED":"GREEN";const _={description:"Dummy widget created at "+new Date,color:i,name:"Widget-"+l,price:[50,100,150,200,300][p],sale:0==p};this.store.dispatch((0,u.w6)({widget:_}))}deleteAllWidgets(){this.allWidgets$.pipe((0,M.P)(),(0,m.b)(n=>{n.forEach(i=>this.store.dispatch((0,u.E9)((0,u.E9)({id:i.id}))))})).subscribe(()=>{this.widgetsByColor=[],this.widgetsByColorDs.data=[]})}makeArrayOfSelectedWidgets(n,i){let l=[];return i.forEach(d=>{const p=n.filter(_=>_.color===d.value);l=l.concat(p)}),l}toggleEtpandedWidget(n){this.expandedWidget=this.expandedWidget==n?null:n}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(O.yh),t.Y36(c.Yg))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-table"]],viewQuery:function(n,i){if(1&n&&(t.Gf(W,5),t.Gf(b.NW,5),t.Gf(h.YE,5)),2&n){let l;t.iGM(l=t.CRH())&&(i.colorsSelector=l.first),t.iGM(l=t.CRH())&&(i.paginator=l.first),t.iGM(l=t.CRH())&&(i.sort=l.first)}},decls:33,vars:9,consts:[["id","widgetsByColor"],["colorsList",""],[3,"value",4,"ngFor","ngForOf"],["id","widgetsByColorFilter",4,"ngIf"],["mat-table","","matSort","","class","mat-elevation-z8 widgets-table","multiTemplateDataRows","",3,"dataSource","matSortChange",4,"ngIf"],[1,"container","mx-auto","mt-24"],[1,"text-lg"],["id","allWidgetsTable","mat-table","",1,"mat-elevation-z8","table-auto",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","price"],["matColumnDef","color"],["matColumnDef","description"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],[3,"value"],["id","widgetsByColorFilter"],["matInput","","type","text",3,"ngModel","ngModelChange","keyup"],["mat-table","","matSort","","multiTemplateDataRows","",1,"mat-elevation-z8","widgets-table",3,"dataSource","matSortChange"],["matColumnDef","displayedColumns"],["mat-header-cell","","mat-sort-header","",3,"click",4,"matHeaderCellDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","expandedDetail"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","widgets-detail-row",3,"collapsed-detail",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header","",3,"click"],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["mat-header-cell",""],[1,"example-element-detail"],["mat-header-row",""],["mat-row","",3,"click"],["mat-row","",1,"widgets-detail-row"],["mat-row",""]],template:function(n,i){1&n&&(t.TgZ(0,"mat-card",0),t.TgZ(1,"mat-card-title"),t._uU(2,"Widgets by color"),t.qZA(),t.TgZ(3,"mat-card-content"),t.TgZ(4,"mat-selection-list",null,1),t.YNc(6,N,2,2,"mat-list-option",2),t.qZA(),t.YNc(7,P,4,1,"mat-form-field",3),t.YNc(8,q,19,6,"table",4),t.qZA(),t.qZA(),t.TgZ(9,"div",5),t.TgZ(10,"h2",6),t._uU(11,"All Widgets"),t.qZA(),t.TgZ(12,"table",7),t.ynx(13,8),t.YNc(14,z,2,0,"th",9),t.YNc(15,L,2,1,"td",10),t.BQk(),t.ynx(16,11),t.YNc(17,G,2,0,"th",9),t.YNc(18,X,3,3,"td",10),t.BQk(),t.ynx(19,12),t.YNc(20,K,2,0,"th",9),t.YNc(21,V,2,1,"td",10),t.BQk(),t.ynx(22,13),t.YNc(23,tt,2,0,"th",9),t.YNc(24,et,2,1,"td",10),t.BQk(),t.YNc(25,nt,1,0,"tr",14),t.YNc(26,ot,1,0,"tr",15),t.qZA(),t._UZ(27,"mat-paginator",16),t.qZA(),t.TgZ(28,"button",17),t.NdJ("click",function(){return i.addDummyWidget()}),t._uU(29,"ADD"),t.qZA(),t.TgZ(30,"button",18),t.NdJ("click",function(){return i.deleteAllWidgets()}),t._uU(31,"DELETE ALL"),t.qZA(),t._UZ(32,"div")),2&n&&(t.xp6(6),t.Q6J("ngForOf",i.allColors),t.xp6(1),t.Q6J("ngIf",i.widgetsByColorDs.data.length),t.xp6(1),t.Q6J("ngIf",i.widgetsByColorDs.data.length),t.xp6(4),t.Q6J("dataSource",i.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",i.allWidgetsDisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.allWidgetsDisplayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(8,it))("pageSize",20))},directives:[f.a8,f.n5,f.dn,w.Ub,g.sg,w.vS,g.O5,y.KE,y.hX,A.Nt,C.Fj,C.JJ,C.On,s.BZ,h.YE,s.w1,s.fO,s.ge,h.nU,s.Dz,s.ev,s.as,s.XQ,s.nj,s.Gk,b.NW,B.lW],pipes:[g.H9],styles:["#widgetsByColor[_ngcontent-%COMP%]{width:100%}@media (min-width: 640px){#widgetsByColor[_ngcontent-%COMP%]{max-width:640px}}@media (min-width: 768px){#widgetsByColor[_ngcontent-%COMP%]{max-width:768px}}@media (min-width: 1024px){#widgetsByColor[_ngcontent-%COMP%]{max-width:1024px}}@media (min-width: 1280px){#widgetsByColor[_ngcontent-%COMP%]{max-width:1280px}}@media (min-width: 1536px){#widgetsByColor[_ngcontent-%COMP%]{max-width:1536px}}#widgetsByColor[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-top:1.5rem}table[_ngcontent-%COMP%]{width:100%}@media (min-width: 640px){table[_ngcontent-%COMP%]{max-width:640px}}@media (min-width: 768px){table[_ngcontent-%COMP%]{max-width:768px}}@media (min-width: 1024px){table[_ngcontent-%COMP%]{max-width:1024px}}@media (min-width: 1280px){table[_ngcontent-%COMP%]{max-width:1280px}}@media (min-width: 1536px){table[_ngcontent-%COMP%]{max-width:1536px}}table[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-top:1.5rem}mat-selection-list[_ngcontent-%COMP%]{overflow:auto;max-height:200px}button[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem;margin-top:2rem}button[_ngcontent-%COMP%]:first-of-type{margin-left:2rem}#allWidgetsTable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-style:italic;--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity))}tr.widgets-detail-row[_ngcontent-%COMP%]{height:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden}.collapsed-detail[_ngcontent-%COMP%]{display:none}.widgets-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:whitesmoke;cursor:pointer}#allWidgetsTable[_ngcontent-%COMP%]   .mat-column-name[_ngcontent-%COMP%], #allWidgetsTable[_ngcontent-%COMP%]   .mat-column-name[_ngcontent-%COMP%], #allWidgetsTable[_ngcontent-%COMP%]   .mat-column-color[_ngcontent-%COMP%]{padding-right:10px}"],data:{animation:[(0,r.X$)("myInsertRemoveTrigger",[(0,r.eR)(":enter",[(0,r.oB)({opacity:0,transform:"scale(1) translateX(0)"}),(0,r.jt)("300ms ease-in",(0,r.oB)({opacity:1,transform:"scale(1) translateX(0)"}))])]),(0,r.X$)("detailExpand",[(0,r.SB)("collapsed",(0,r.oB)({height:"0px",minHeight:"0"})),(0,r.SB)("expanded",(0,r.oB)({height:"*",color:"black"})),(0,r.eR)("expanded <=> collapsed",(0,r.jt)("300ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),e})();var lt=a(6517),st=a(8670),rt=a(4466);const dt=[{path:"",component:at}];let ct=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[],imports:[[g.ez,rt.m,Z.Bz.forChild(dt),lt.sQ.forFeature([st.q])]]}),e})()}}]);