"use strict";(self.webpackChunkcvs=self.webpackChunkcvs||[]).push([[592],{8670:(K,W,i)=>{i.d(W,{q:()=>I});var o=i(6517),s=i(2473),c=i(1086),l=i(1406),g=i(4850),n=i(7221),u=i(2994),N=i(2198),$=i(9563),h=i(5e3),E=i(1737),p=i(2340),S=i(520),G=i(7261);let A=(()=>{class d{constructor(t,a){this.http=t,this.snackBar=a}getAllWidgets(){return this.http.get(`${p.N.APPOINTMENTS_DOMAIN}/widgets`).pipe((0,g.U)(t=>Object.values(t)),(0,n.K)(t=>this.handleError(t)))}addWidget(t){return this.http.post(`${p.N.APPOINTMENTS_DOMAIN}/widgets`,t).pipe((0,n.K)(a=>this.handleError(a)))}deleteWidget(t){return this.http.delete(`${p.N.APPOINTMENTS_DOMAIN}/widgets/${t}`).pipe((0,n.K)(a=>this.handleError(a)))}modifyWidget(t,a){return this.http.put(`${p.N.APPOINTMENTS_DOMAIN}/widgets/${t}`,a).pipe((0,n.K)(f=>this.handleError(f)))}handleError(t){return this.snackBar.open("Server error. "+t.error.error,"Close",{duration:1e4}),(0,E._)(t)}}return d.\u0275fac=function(t){return new(t||d)(h.LFG(S.eN),h.LFG(G.ux))},d.\u0275prov=h.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();var O=i(6727);let I=(()=>{class d{constructor(t,a,f){this.actions$=t,this.widgetsService=a,this.store=f,this.loadWidgets$=(0,o.GW)(()=>this.actions$.pipe((0,o.l4)(s.G1),(0,l.b)(r=>this.widgetsService.getAllWidgets().pipe((0,g.U)(e=>s.l_({widgets:e})),(0,n.K)(e=>(0,c.of)(s.nO({err:e}))))))),this.loadWidgetsLazy$=(0,o.GW)(()=>this.actions$.pipe((0,o.l4)(s.rZ),(0,o.IC)(r=>this.store.select($.Rj)),(0,u.b)(([r,e])=>{console.log("action:",r),console.log("loaded:",e)}),(0,N.h)(([r,e])=>!e),(0,l.b)(()=>this.widgetsService.getAllWidgets().pipe((0,g.U)(r=>s.l_({widgets:r})),(0,n.K)(r=>(0,c.of)(s.nO({err:r}))))))),this.addWidget$=(0,o.GW)(()=>this.actions$.pipe((0,o.l4)(s.w6),(0,l.b)(r=>this.widgetsService.addWidget(r.widget).pipe((0,g.U)(e=>s.uG({widget:e})),(0,n.K)(e=>(0,c.of)(s.nk({err:e}))))))),this.deleteWidget$=(0,o.GW)(()=>this.actions$.pipe((0,o.l4)(s.E9),(0,l.b)(r=>this.widgetsService.deleteWidget(r.id).pipe((0,g.U)(e=>s.EU({id:r.id})),(0,n.K)(e=>(0,c.of)(s.Yv({err:e}))))))),this.updateWidget$=(0,o.GW)(()=>this.actions$.pipe((0,o.l4)(s.QB),(0,l.b)(r=>this.widgetsService.modifyWidget(r.widget.id,r.widget.changes).pipe((0,g.U)(e=>s.fg({widget:{id:e.id,changes:e}})),(0,n.K)(e=>(0,c.of)(s.Gt({err:e})))))))}}return d.\u0275fac=function(t){return new(t||d)(h.LFG(o.eX),h.LFG(A),h.LFG(O.yh))},d.\u0275prov=h.Yz7({token:d,factory:d.\u0275fac}),d})()}}]);